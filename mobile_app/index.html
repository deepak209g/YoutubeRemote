<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width = device-width, initial-scale = 1, 
         maximum-scale = 1, minimum-scale = 1, user-scalable = no, minimal-ui" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
<!-- Add this to <head> -->
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css"/>
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"/>
    <style>
        body {
            font-family: 'Ropa Sans', sans-serif;
            color: #333;
            max-width: 640px;
            margin: 0 auto;
            position: relative;
        }

        #githubLink {
            position: absolute;
            right: 0;
            top: 12px;
            color: #2D99FF;
        }

        h1 {
            margin: 10px 0;
            font-size: 40px;
        }

        #loadingMessage {
            text-align: center;
            padding: 40px;
            background-color: #eee;
        }

        #canvas {
            width: 100%;
        }

        #output {
            margin-top: 20px;
            background: #eee;
            padding: 10px;
            padding-bottom: 0;
        }

        #output div {
            padding-bottom: 10px;
            word-wrap: break-word;
        }

        #noQRFound {
            text-align: center;
        }
    </style>
</head>

<body>
        <div class="container">
                <div class="row">
                  <ul class="nav nav-tabs col align-self-center" role="tablist">
                    <li class="nav-item">
                      <a class="nav-link active" data-toggle="pill" href="#connect" role="tab">Connect</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" data-toggle="pill" href="#youtube" role="tab">Youtube</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" data-toggle="pill" href="#settings" role="tab">Settings</a>
                    </li>
                  </ul>
                </div>
            
                <!-- Tab panes -->
              </div>
              <!-- Nav tabs -->
              <div class="tab-content">
                <div class="tab-pane active" id="connect" role="tabpanel">
                  <!-- qr code goes here -->
                  <div class="container">
                      <div id="my_camera"></div>
                        <button id="butt">take snapshot</button>
                        <div id="res">{{ qrcode }}</div>
                  </div>
            
                </div>
                <div class="tab-pane" id="youtube" role="tabpanel">
                    youtubhe
                  <!-- youtube webview goes here -->
                  <!-- <webview id="webview" src="https://www.youtube.com/" style="width:100%; height:100%"></webview> -->
            
                </div>
                <div class="tab-pane" id="settings" role="tabpanel">
                  <!-- settings goes here -->
                  settings
                  <div>
                    <button id="next">Next</button>
                    <input type="text" name="song" id="song">
                    <button id="play">Play</button>
                  </div>
                </div>
              </div>


    <!-- <div class="views">
        <div class="view view-main">
            <div class="pages navbar-fixed">
                <div data-page="home" class="page with-subnavbar">



                    <div class="tabs-swipeable-wrap">
                        <div class="tabs">
                            <div id="tab1" class="page-content with-subnavbar tab active">
                                <div class="content-block">
                                    
                                </div>
                            </div>

                            <div id="tab2" class="page-content tab">
                                <div class="content-block">
                                    <p>This is tab 2 content</p>
                                    <p>Ut ac lobortis lacus, non pellentesque arcu. Quisque sodales sapien malesuada, condimentum
                                        nunc at, viverra lacus. Class aptent taciti sociosqu ad litora torquent per conubia
                                        nostra, per inceptos himenaeos. Vivamus eu pulvinar turpis, id tristique quam. Aenean
                                        venenatis molestie diam, sit amet condimentum nisl pretium id. Donec diam tortor,
                                        mollis in vehicula id, vehicula consectetur nulla. Quisque posuere rutrum mauris,
                                        eu rutrum turpis blandit at. Proin volutpat tortor sit amet metus porttitor accumsan.
                                        Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos
                                        himenaeos. Ut dapibus posuere dictum.</p>
                                </div>
                            </div>

                            <div id="tab3" class="page-content tab">
                                <div class="content-block">
                                    <p>This is tab 3 content</p>
                                    <p>Nulla gravida libero eget lobortis iaculis. In sed elit eu nibh adipiscing faucibus.
                                        Sed ac accumsan lacus. In ut diam quis turpis fringilla volutpat. In ultrices dignissim
                                        consequat. Cras pretium tortor et lorem condimentum posuere. Nulla facilisi. Suspendisse
                                        pretium egestas lacus ac laoreet. Mauris rhoncus quis ipsum quis tristique. Vivamus
                                        ultricies urna quis nunc egestas, in euismod turpis fringilla. Nam tellus massa,
                                        vehicula eu sapien non, dapibus tempor lorem. Fusce placerat orci arcu, eu dignissim
                                        enim porttitor vel. Nullam porttitor vel dolor sed feugiat. Suspendisse potenti.
                                        Maecenas ac mattis odio. Sed vel ultricies lacus, sed posuere libero.</p>
                                </div>
                            </div>

                        </div>
                    </div>


                    <div class="navbar">
                        <div class="navbar-inner">
                            <div class="center">Youtube Remote</div>
                            <div class="subnavbar">
                                <div class="buttons-row">
                                    <a href="#tab1" class="button active tab-link">Tab 1</a>
                                    <a href="#tab2" class="button tab-link">Tab 2</a>
                                    <a href="#tab3" class="button tab-link">Tab 3</a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div> -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"></script>
    <!-- Add this after vue.js -->
<script src="//unpkg.com/babel-polyfill@latest/dist/polyfill.min.js"></script>
<script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/framework7/1.4.2/js/framework7.min.js"></script> -->
    <script src="js/webcam.js"></script>
    <script src="js/jsQR.js"></script>
    <script>
        // here initialize the app
        // var myApp = new Framework7();

        var qr = new Vue({
            el: '#res',
            data: {
                qrcode: 'Hello Vue!'
            }
        })

        // If your using custom DOM library, then save it to $$ variable
        // var $$ = Dom7;

        // Add the view
        // var mainView = myApp.addView('.view-main', {
        //     // enable the dynamic navbar for this view:
        //     dynamicNavbar: true
        // });



        Webcam.set({
            width: 320,
            height: 240,
            dest_width: 640,
            dest_height: 480,
            image_format: 'jpeg',
            jpeg_quality: 90,
        })
        Webcam.attach('#my_camera');

        document.getElementById('butt').addEventListener('click', function(){
            take_snapshot()
        })
        function take_snapshot() {
            qr.qrcode = 'asodfja;sklfj'
            Webcam.snap(function (data_uri, canvas, context) {
                // alert(typeof data_uri)
                // document.getElementById('my_result').innerHTML = '<img width="500px" src="' + data_uri + '"/>';
                // document.getElementById('res').innerHTML = typeof data_uri
                qr.qrcode = canvas.width;
                var imageData = canvas.getImageData(0, 0, canvas.width, canvas.height);
                qr.qrcode = imageData.height;
                var code = jsQR(imageData.data, imageData.width, imageData.height);
                if (code) {
                    // alert(code)
                    qr.qrcode = code
                } else {
                    qr.qrcode = code
                }
            });
        }
        // var video = document.createElement("video");
        // var canvasElement = document.getElementById("canvas");
        // var canvas = canvasElement.getContext("2d");
        // var loadingMessage = document.getElementById("loadingMessage");
        // var outputContainer = document.getElementById("output");
        // var outputMessage = document.getElementById("outputMessage");
        // var outputData = document.getElementById("outputData");

        // function drawLine(begin, end, color) {
        //     canvas.beginPath();
        //     canvas.moveTo(begin.x, begin.y);
        //     canvas.lineTo(end.x, end.y);
        //     canvas.lineWidth = 4;
        //     canvas.strokeStyle = color;
        //     canvas.stroke();
        // }

        // // Use facingMode: environment to attemt to get the front camera on phones
        // navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } }).then(function (stream) {
        //     video.srcObject = stream;
        //     video.setAttribute("playsinline", true); // required to tell iOS safari we don't want fullscreen
        //     video.play();
        //     requestAnimationFrame(tick);
        // });

        // function tick() {
        //     loadingMessage.innerText = "âŒ› Loading video..."
        //     if (video.readyState === video.HAVE_ENOUGH_DATA) {
        //         loadingMessage.hidden = true;
        //         canvasElement.hidden = false;
        //         outputContainer.hidden = false;

        //         canvasElement.height = video.videoHeight;
        //         canvasElement.width = video.videoWidth;
        //         canvas.drawImage(video, 0, 0, canvasElement.width, canvasElement.height);
        //         var imageData = canvas.getImageData(0, 0, canvasElement.width, canvasElement.height);
        //         var code = jsQR(imageData.data, imageData.width, imageData.height);
        //         if (code) {
        //             drawLine(code.location.topLeftCorner, code.location.topRightCorner, "#FF3B58");
        //             drawLine(code.location.topRightCorner, code.location.bottomRightCorner, "#FF3B58");
        //             drawLine(code.location.bottomRightCorner, code.location.bottomLeftCorner, "#FF3B58");
        //             drawLine(code.location.bottomLeftCorner, code.location.topLeftCorner, "#FF3B58");
        //             outputMessage.hidden = true;
        //             outputData.parentElement.hidden = false;
        //             outputData.innerText = code.data;
        //         } else {
        //             outputMessage.hidden = false;
        //             outputData.parentElement.hidden = true;
        //         }
        //     }
        //     requestAnimationFrame(tick);
        // }
    </script>
</body>

</html>